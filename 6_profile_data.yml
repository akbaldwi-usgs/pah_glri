target_default: 6_profile_data

packages:
  - dplyr
  - tidyr
  - pah
  - ggplot2
  
include:
  - 3_filter_data.yml
  
sources:
  - 6_profile_data/src/create_profiles.R
  
targets:
  6_profile_data:
    depends:
      - prepped_for_profiles
      - prepped_totals
      - profiles
      
  prepped_for_profiles:
    command: prep_profiles(pah_dat = samples)
    
  prepped_totals:
    command: prep_totals(pah_dat = samples)
    
  profiles: 
    command: pah_profiler(pah_dat = prepped_for_profiles, compound_column = I('casrn'), sample_column = I('sample_id'),
                    conc_column = I('RESULT'))
  
  6_profile_data/doc/chi2_allsites_nocreasote.png:
    command: pah::plot_profiles(profile_dat = profiles, plot_type = 'boxplot',
                  include_creosote = F)
                    
  